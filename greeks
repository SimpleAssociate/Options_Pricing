#include <vector>
#include <iostream>
#include <string>
#include<cmath>
using namespace std;

#ifndef Pi 
#define Pi 3.141592653589793238462643 
#endif 

class option{ 
    public: 
    double S; 
    double K;
    double r; 
    double sigma; 
    double time; 
    
    double delta;
    double gamma;
    double theta;
    double vega;
    double rho;
    
    
    option(); 
    
    double cnd(double x);
    
    double price(        
                            double S,
                            double K,
                            double r,
                            double sigma,
                            double time); 
                            
    void greeks(            double S,
                            double K,
                            double r,
                            double sigma,
                            double time,
                            
                            double delta,
                            double gamma,
                            double theta,
                            double vega, 
                            double rho);
};

option :: option(){
 S =    50;
 K = 50;
 r = .1;
 sigma = .3;
 time = .5; 
}
    
double option:: cnd(double x)
{
  double L, K, w ;
  /* constants */
  double const a1 = 0.31938153, a2 = -0.356563782, a3 = 1.781477937;
  double const a4 = -1.821255978, a5 = 1.330274429;

  L = fabs(x);
  K = 1.0 / (1.0 + 0.2316419 * L);
  w = 1.0 - 1.0 / sqrt(2 * Pi) * exp(-L *L / 2) * (a1 * K + a2 * K *K + a3 * pow(K,3) + a4 * pow(K,4) + a5 * pow(K,5));

  if (x < 0 ){
    w= 1.0 - w;
  }
  return w;
}



double option :: price(
                            double S,
                            double K,
                            double r,
                            double sigma,
                            double time)
{
        
        double time_sqrt = sqrt(time);
        double d1 = (log(S/K)+r*time)/(sigma*time_sqrt)+.5*sigma*time_sqrt;
        double d2 = d1-(sigma*time_sqrt);
        
        double price = S*cnd(d1)-K*exp(-r*time)*cnd(d2);
        
        return price; 
    }
    
    
void option :: greeks(
                        double S,
                        double K,
                        double r, 
                        double sigma,
                        double time,
                        
                        double delta, 
                        double gamma, 
                        double theta,
                        double vega, 
                        double rho) 
                        
    {
        double time_sqrt = sqrt(time);
        double d1 = ((log(S/K)+r*time)/(sigma*time_sqrt)) + 0.5*sigma*time_sqrt;
        double d2 = d1-(sigma*time_sqrt);
        delta = cnd(d1);
        gamma = cnd(d1)/(S*sigma*time_sqrt);
        theta = -(S*sigma*cnd(d1))/(2*time_sqrt) - r*K*exp(-r*time)*cnd(d2);
        vega = S*time_sqrt*cnd(d1);
        rho = K*time*exp(-r*time)*cnd(d2);
    }


int main()
{
    option call;
    double price = 0;
    
    
    price = call.price(call.S,call.K,call.r,call.sigma,call.time);
    
    call.greeks(call.S,call.K,call.r,call.sigma,call.time,
                        call.delta,call.gamma,call.theta,call.vega,call.rho);
                        
                        
    
    cout<<price<<"\n";
    cout<<call.delta<<"\n";
    cout<<call.gamma<<"\n";
    cout<<call.theta<<"\n";
    cout<<call.vega<<"\n";
    cout<<call.rho<<"\n";
    
    
    
return 0;
}



